<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.250">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chung-hong Chan (GESIS)">

<title>Quantifying implicit associations among words using word embeddings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Quantifying implicit associations among words using word embeddings</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chung-hong Chan (GESIS) </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stringi::stri_info(): Your current locale is not in the list of
available locales. Some functions may not work properly. Refer to
stri_locale_list() for more details on known locale specifiers.

Warning in stringi::stri_info(): Your current locale is not in the list of
available locales. Some functions may not work properly. Refer to
stri_locale_list() for more details on known locale specifiers.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 3.2.4
Unicode version: 14.0
ICU version: 70.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Parallel computing: 8 of 8 threads used.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(memisc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: MASS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'memisc'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    contr.sum, contr.treatment, contrasts</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:base':

    as.array</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sweater)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'sweater'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:memisc':

    query</code></pre>
</div>
</div>
<section id="empowerment-statement" class="level2">
<h2 class="anchored" data-anchor-id="empowerment-statement">Empowerment statement</h2>
<p>In this Methods Hub entry, I am going to show you how to test for implicit associations using word embeddings trained on a large language corpus.</p>
</section>
<section id="cosine-distance" class="level2">
<h2 class="anchored" data-anchor-id="cosine-distance">Cosine distance</h2>
<p>Suppose we have the following corpus of 10 documents:</p>
<p><strong>Doc 1</strong>: berlin is the capital of germany</p>
<p><strong>Doc 2</strong>: paris is the capital of france</p>
<p><strong>Doc 3</strong>: tokyo is the capital of japan</p>
<p><strong>Doc 4</strong>: the cat is weird</p>
<p><strong>Doc 5</strong>: berlin</p>
<p><strong>Doc 6</strong>: paris is nice</p>
<p><strong>Doc 7</strong>: paris is nice</p>
<p><strong>Doc 8</strong>: paris is nice</p>
<p><strong>Doc 9</strong>: paris is nice</p>
<p><strong>Doc 10</strong>: berlin is weird</p>
<p>The unique token types are: “berlin”, “is”, “the”, “capital”, “of”, “germany”, “paris”, “france”, “tokyo”, “japan”, “cat”, “weird”, “nice”. The representation of the above corpus as a document-term matrix is:</p>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>berlin</th>
<th>is</th>
<th>the</th>
<th>capital</th>
<th>of</th>
<th>germany</th>
<th>paris</th>
<th>france</th>
<th>tokyo</th>
<th>japan</th>
<th>cat</th>
<th>weird</th>
<th>nice</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>4</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>6</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td>7</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td>8</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td>9</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td>10</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The row vector is the vector representation of the document. One way to compare the similarity between two <strong>documents</strong> is to calculate the cosine similarity. Cosine similarity between two vectors (<span class="math inline">\(\mathbf{A}\)</span>, <span class="math inline">\(\mathbf{B}\)</span>) is defined as:</p>
<p><span class="math display">\[
\cos(\theta) = {\mathbf{A} \cdot \mathbf{B} \over \|\mathbf{A}\| \|\mathbf{B}\|}
\]</span></p>
<p>For example, the cosine similarity between <em>Doc 1</em> <code>[1,1,1,1,1,1,0,0,0,0,0,0,0]</code> and <em>Doc 2</em> <code>[0,1,1,1,1,0,1,1,0,0,0,0,0]</code> is:</p>
<p><span class="math display">\[
\begin{align}
\mathbf{A} \cdot \mathbf{B} &amp;= 1 \times 0 + 1 \times 1 + 1 \times 1 +1 \times 1 +1 \times 1 + 1 \times 0 + 0 \times 1 + 0 \times 1 + 0 \times 0 + 0 \times 0 + 0 \times 0 + 0 \times 0 + 0 \times 0 \\
&amp;= 4\\
\|\mathbf{A}\| &amp;= \sqrt{1^2 + 1^2 + 1^2 + 1^2 + 1^2 + 1^2 + 0^2 + 0^2 + 0^2 + 0^2 + 0^2 + 0^2 + 0^2} \\
&amp;= \sqrt{6}\\
\|\mathbf{B}\| &amp;= \sqrt{0^2 + 1^2 + 1^2 + 1^2 + 1^2 + 0^2 + 1^2 + 1^2 + 0^2 + 0^2 + 0^2 + 0^2 + 0^2} \\
&amp;= \sqrt{6}\\
\cos(\theta) &amp;= { 4 \over \sqrt{6} \times \sqrt{6}}\\
&amp;= 0.\overline{6}
\end{align}
\]</span></p>
<p>In R, <code>lsa</code> <span class="citation" data-cites="lsarpackage">(<a href="#ref-lsarpackage" role="doc-biblioref">Wild, 2022</a>)</span> can be used to calculate cosine similarity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lsa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: SnowballC</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lsa'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:sweater':

    query</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:memisc':

    query</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>doc1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>doc2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(doc1, doc2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.6666667</code></pre>
</div>
</div>
<p>Or using <code>quanteda</code> <span class="citation" data-cites="benoit:2018">(<a href="#ref-benoit:2018" role="doc-biblioref">Benoit et al., 2018</a>)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(quanteda)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>docs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"berlin is the capital of germany"</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">"paris is the capital of france"</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"tokyo is the capital of japan"</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">"the cat is weird"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"berlin"</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>          <span class="st">"paris is nice"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"paris is nice"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>          <span class="st">"paris is nice"</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>          <span class="st">"paris is nice"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>          <span class="st">"berlin is weird"</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>docs_dtm <span class="ot">&lt;-</span> <span class="fu">corpus</span>(docs) <span class="sc">%&gt;%</span> tokens <span class="sc">%&gt;%</span> <span class="fu">dfm</span>()</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>docs_dtm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 10 documents, 13 features (70.77% sparse) and 0 docvars.
       features
docs    berlin is the capital of germany paris france tokyo japan
  text1      1  1   1       1  1       1     0      0     0     0
  text2      0  1   1       1  1       0     1      1     0     0
  text3      0  1   1       1  1       0     0      0     1     1
  text4      0  1   1       0  0       0     0      0     0     0
  text5      1  0   0       0  0       0     0      0     0     0
  text6      0  1   0       0  0       0     1      0     0     0
[ reached max_ndoc ... 4 more documents, reached max_nfeat ... 3 more features ]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(<span class="fu">as.vector</span>(docs_dtm[<span class="dv">1</span>,]), <span class="fu">as.vector</span>(docs_dtm[<span class="dv">2</span>,]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.6666667</code></pre>
</div>
</div>
<p>The cosine similarity between <em>Doc 1</em> and <em>Doc 6</em> is much lower, as there is just one common word <em>“is”</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>doc6 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">##or</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="do">##cosine(as.vector(docs_dtm[1,]), as.vector(docs_dtm[6,]))</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(doc1, doc6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.2357023</code></pre>
</div>
</div>
</section>
<section id="one-hot-vectors" class="level2">
<h2 class="anchored" data-anchor-id="one-hot-vectors">One-hot vectors</h2>
<p>In the traditional “bag of words” text representation, a word is presented as a so-called “one-hot” vector. In the above example, the fifth document has just one word of “berlin”. This document is represented as row vector <code>[1,0,0,0,0,0,0,0,0,0,0,0,0]</code> in the document-term matrix. This vector is sparse (many zeros). One can also reason it as the “one-hot” vector representation of the word “berlin”, because there is exactly one instance of “1” in the entire vector. One-hot vector representation of word is not very useful for comparison between <strong>words</strong>. For example, cosine similarity of “one-hot” vectors of two different words is always 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## comparing "berlin" and "paris"</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## comparing "berlin" and "cat"</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## comparing "berlin" and "nice"</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## comparing "paris" and "nice"</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    0</code></pre>
</div>
</div>
<p>However, we should anticipate that “berlin” and “paris” should be more similar in latent meaning (at least both of them are described in the context of “capital”) than “berlin” and “cat”.</p>
</section>
<section id="dense-word-vectors" class="level2">
<h2 class="anchored" data-anchor-id="dense-word-vectors">(Dense) word vectors</h2>
<p>An improvement to this is to make them “dense” word vectors. One way is to train word embeddings on the corpus in order to generate dense word vectors. Word embeddings can capture the <strong>distributional semantics</strong> of words: words that are used and occur in the same contexts tend to purport similar meanings.</p>
<p>In the following example, the GLoVe embeddings are trained <span class="citation" data-cites="pennington:2014:G">(<a href="#ref-pennington:2014:G" role="doc-biblioref">Pennington et al., 2014</a>)</span>. The GLoVe algorithm is based on the weighted feature-cooccurrence matrix (FCM) representation of the corpus, which can be generated by quanteda <span class="citation" data-cites="benoit:2018">(<a href="#ref-benoit:2018" role="doc-biblioref">Benoit et al., 2018</a>)</span>.</p>
<p>There are three parameters needed to be specified: <code>WINDOWS_SIZE</code>, <code>RANK</code>, <code>LEARNING_RATE</code>. <code>WINDOW_SIZE</code> determines how close two words are is being considered as related. <code>RANK</code> determines the output length of the word vector. <code>LEARNING_RATE</code> determines the learning rate of the algorithm.</p>
<p>The FCM is a square matrix with each cell represents how likely two words are cooccured.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>WINDOW_SIZE <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>weighted_fcm_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(docs) <span class="sc">%&gt;%</span> <span class="fu">tokens</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fcm</span>(<span class="at">window =</span> WINDOW_SIZE, <span class="at">weights =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">seq_len</span>(WINDOW_SIZE),</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">count =</span> <span class="st">"weighted"</span>, <span class="at">context =</span> <span class="st">"window"</span>, <span class="at">tri =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>weighted_fcm_corpus</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Feature co-occurrence matrix of: 13 by 13 features.
         features
features  berlin is the   capital  of   germany     paris    france     tokyo
  berlin       0  2 0.5 0.3333333 0   0         0         0         0        
  is           0  0 3.5 1.5000000 1.0 0         5.0000000 0         1.0000000
  the          0  0 0   3.0000000 1.5 0.3333333 0.5000000 0.3333333 0.5000000
  capital      0  0 0   0         3.0 0.5000000 0.3333333 0.5000000 0.3333333
  of           0  0 0   0         0   1.0000000 0         1.0000000 0        
  germany      0  0 0   0         0   0         0         0         0        
  paris        0  0 0   0         0   0         0         0         0        
  france       0  0 0   0         0   0         0         0         0        
  tokyo        0  0 0   0         0   0         0         0         0        
  japan        0  0 0   0         0   0         0         0         0        
         features
features      japan
  berlin  0        
  is      0        
  the     0.3333333
  capital 0.5000000
  of      1.0000000
  germany 0        
  paris   0        
  france  0        
  tokyo   0        
  japan   0        
[ reached max_feat ... 3 more features, reached max_nfeat ... 3 more features ]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsparse)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>RANK <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>LEARNING_RATE <span class="ot">&lt;-</span> <span class="fl">0.05</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>glove <span class="ot">&lt;-</span> GloVe<span class="sc">$</span><span class="fu">new</span>(<span class="at">rank =</span> RANK, <span class="at">x_max =</span> RANK <span class="sc">/</span> <span class="dv">2</span>, <span class="at">learning_rate =</span> LEARNING_RATE)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>wv_main <span class="ot">&lt;-</span> glove<span class="sc">$</span><span class="fu">fit_transform</span>(weighted_fcm_corpus, <span class="at">n_iter =</span> <span class="dv">100</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                               <span class="at">convergence_tol =</span> <span class="fl">0.01</span>, <span class="at">n_threads =</span> <span class="dv">8</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>wv_context <span class="ot">&lt;-</span> glove<span class="sc">$</span>components</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>dense_vectors <span class="ot">&lt;-</span> wv_main <span class="sc">+</span> <span class="fu">t</span>(wv_context)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The (dense) word vectors are, as the name suggested, dense. The dimension is equal to <code>RANK</code>. We can also think about the following matrix as a multidimensional <em>word embedding space</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>dense_vectors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               [,1]        [,2]        [,3]       [,4]         [,5]
berlin   0.77918879  0.21208042 -0.07132330  0.4925249  0.189580184
is       1.16086095  1.01241508 -1.01838103 -0.1447198  0.790620808
the     -0.73136964  0.37743063 -1.04409075 -0.7518618 -0.176935665
capital -1.54693014  0.36360589 -0.98095972 -0.3935615 -0.539922935
of      -1.14130401 -0.32691299 -0.11775594  0.2495889 -0.094822524
germany  0.06611616  0.03316522  0.57966503  0.4630908  0.522708175
paris    1.56014156  0.55376481 -0.68117470  0.2649566  0.513216846
france   0.11016152 -0.01683029  0.98754538  0.2280311  0.337818682
tokyo    0.29452090 -0.84479144  0.95821081  0.3724941  0.732802202
japan   -0.18245297 -0.06432590  0.88502500  0.3942100  0.007273912
cat      0.15718355 -0.21789368 -0.22891218  0.5354714 -0.248785788
weird    0.46984731  0.25676397  0.01264314 -0.2650027  0.227891321
nice     0.83476522  0.49226904  0.19221554 -0.2512290  0.585083363</code></pre>
</div>
</div>
<p>And the row vectors can be compared using cosine similarity. Now, we can see that the similarity between “berlin” and “paris” is higher than “berlin” and “cat”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(dense_vectors[<span class="st">"berlin"</span>,], dense_vectors[<span class="st">"paris"</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.8845276</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(dense_vectors[<span class="st">"berlin"</span>,], dense_vectors[<span class="st">"cat"</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.4646039</code></pre>
</div>
</div>
</section>
<section id="target-words-and-attribute-words" class="level2">
<h2 class="anchored" data-anchor-id="target-words-and-attribute-words">Target words and attribute words</h2>
<p>Suppose “paris”, “tokyo”, and “berlin” are the words we are interested in. We can called these words <em>target words</em>. We can determine how these words are similar to some other words in the word embeddings space. Suppose we set “nice” to be the attribute word. By determining the similarities between the target words and attribute words, we can see the implicit association between words. In this example, we can see that “paris” is highly associated with “nice”; but not “tokyo” and “berlin”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(dense_vectors[<span class="st">"paris"</span>,], dense_vectors[<span class="st">"nice"</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.7588269</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(dense_vectors[<span class="st">"tokyo"</span>,], dense_vectors[<span class="st">"nice"</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.1920778</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cosine</span>(dense_vectors[<span class="st">"berlin"</span>,], dense_vectors[<span class="st">"nice"</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.6405644</code></pre>
</div>
</div>
</section>
<section id="pretrained-word-embeddings" class="level2">
<h2 class="anchored" data-anchor-id="pretrained-word-embeddings">Pretrained word embeddings</h2>
<p>We can train our own word embeddings. But there are also several pretrained word embeddings trained on large corpora available for download.</p>
<ul>
<li><a href="https://huggingface.co/fse/word2vec-google-news-300">word2vec</a> trained on Google News</li>
<li><a href="https://nlp.stanford.edu/projects/glove/">GLoVe</a> trained on Wikipedia, Common Crawl, and Gigaword</li>
<li><a href="https://fasttext.cc/docs/en/crawl-vectors.html">fastText</a> trained on Wikipedia and Common Crawl</li>
</ul>
<p>In the following example, we will use the pretrained GLoVe word embeddings to replicate the findings by <span class="citation" data-cites="caliskan:2017:S">Caliskan et al. (<a href="#ref-caliskan:2017:S" role="doc-biblioref">2017</a>)</span> and pretrained word2vec word embeddings to replicate the findings from <span class="citation" data-cites="garg:2018:W">Garg et al. (<a href="#ref-garg:2018:W" role="doc-biblioref">2018</a>)</span>. The R package <code>sweater</code> <span class="citation" data-cites="chan:2022">(<a href="#ref-chan:2022" role="doc-biblioref">Chan, 2022</a>)</span> can be used to read the downloaded word embedding file.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(sweater)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>glove <span class="ot">&lt;-</span> <span class="fu">read_word2vec</span>(<span class="st">"glove.840B.300d.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The package also provides a subset of the word embeddings called <code>glove_math</code>.</p>
</section>
<section id="query" class="level2">
<h2 class="anchored" data-anchor-id="query">Query</h2>
<p><code>sweater</code> use the concept of query to look for associations.</p>
<p>A query requires two sets of words: Target words (<span class="math inline">\(\mathcal{S}\)</span>, <span class="math inline">\(\mathcal{T}\)</span>) and Attribute words (<span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span>). The package provides different methods and they require different combinations of <span class="math inline">\(\mathcal{S}\)</span>, <span class="math inline">\(\mathcal{T}\)</span>, <span class="math inline">\(\mathcal{A}\)</span>, and <span class="math inline">\(\mathcal{B}\)</span>.</p>
<table class="table">
<colgroup>
<col style="width: 36%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Target words</th>
<th>Attribute words</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mean Average Cosine Similarity</td>
<td><span class="math inline">\(\mathcal{S}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span></td>
</tr>
<tr class="even">
<td>Relative Norm Distance</td>
<td><span class="math inline">\(\mathcal{S}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span></td>
</tr>
<tr class="odd">
<td>Relative Negative Sentiment Bias</td>
<td><span class="math inline">\(\mathcal{S}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span></td>
</tr>
<tr class="even">
<td>SemAxis</td>
<td><span class="math inline">\(\mathcal{S}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span></td>
</tr>
<tr class="odd">
<td>Normalized Association Score</td>
<td><span class="math inline">\(\mathcal{S}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span></td>
</tr>
<tr class="even">
<td>Embedding Coherence Test</td>
<td><span class="math inline">\(\mathcal{S}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span></td>
</tr>
<tr class="odd">
<td>Word Embedding Association Test</td>
<td><span class="math inline">\(\mathcal{S}\)</span>, <span class="math inline">\(\mathcal{T}\)</span></td>
<td><span class="math inline">\(\mathcal{A}\)</span>, <span class="math inline">\(\mathcal{B}\)</span></td>
</tr>
</tbody>
</table>
<p>All methods use the same <code>query</code> function.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">query</span>(w, S_words, T_words, A_words, B_words, <span class="at">method =</span> <span class="st">"guess"</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="case-study-gender-biases-in-word-embeddings" class="level2">
<h2 class="anchored" data-anchor-id="case-study-gender-biases-in-word-embeddings">Case study: Gender biases in word embeddings</h2>
<section id="word-embedding-association-test" class="level3">
<h3 class="anchored" data-anchor-id="word-embedding-association-test">Word Embedding Association Test</h3>
<p>Word Embedding Association Test (WEAT) <span class="citation" data-cites="caliskan:2017:S">(<a href="#ref-caliskan:2017:S" role="doc-biblioref">Caliskan et al., 2017</a>)</span> requires all four wordsets of <span class="math inline">\(\mathcal{S}\)</span>, <span class="math inline">\(\mathcal{T}\)</span>, <span class="math inline">\(\mathcal{A}\)</span>, and <span class="math inline">\(\mathcal{B}\)</span>. The method is modeled after the Implicit Association Test (IAT) and it measures the relative strength of <span class="math inline">\(\mathcal{S}\)</span>’s association with <span class="math inline">\(\mathcal{A}\)</span> to <span class="math inline">\(\mathcal{B}\)</span> against the same of <span class="math inline">\(\mathcal{T}\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(sweater)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"math"</span>, <span class="st">"algebra"</span>, <span class="st">"geometry"</span>, <span class="st">"calculus"</span>, <span class="st">"equations"</span>, <span class="st">"computation"</span>,</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">"numbers"</span>, <span class="st">"addition"</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>T <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"poetry"</span>, <span class="st">"art"</span>, <span class="st">"dance"</span>, <span class="st">"literature"</span>, <span class="st">"novel"</span>, <span class="st">"symphony"</span>, <span class="st">"drama"</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">"sculpture"</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"male"</span>, <span class="st">"man"</span>, <span class="st">"boy"</span>, <span class="st">"brother"</span>, <span class="st">"he"</span>, <span class="st">"him"</span>, <span class="st">"his"</span>, <span class="st">"son"</span>)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"woman"</span>, <span class="st">"girl"</span>, <span class="st">"sister"</span>, <span class="st">"she"</span>, <span class="st">"her"</span>, <span class="st">"hers"</span>, <span class="st">"daughter"</span>)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>sw <span class="ot">&lt;-</span> <span class="fu">query</span>(glove_math, S, T, A, B)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>sw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── sweater object ──────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Test type:  weat 
Effect size:  1.055015 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Functions ───────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• `calculate_es()`: Calculate effect size</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• `weat_resampling()`: Conduct statistical test</code></pre>
</div>
</div>
<p>The effect size can be interpreted the same way as Cohen’s d.&nbsp;In this case, the effect size is positive, indicating the math-related concepts are more associated with male than female, whereas art-related concepts are more associated with female than male.</p>
</section>
<section id="relative-norm-distance" class="level3">
<h3 class="anchored" data-anchor-id="relative-norm-distance">Relative Norm Distance</h3>
<p><span class="citation" data-cites="garg:2018:W">Garg et al. (<a href="#ref-garg:2018:W" role="doc-biblioref">2018</a>)</span> use Relative Norm Distance to quantify gender biases of occupation words in the pretrained Google News Word Embeddings. The method requires one set of target words and two sets of attribute words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(sweater)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>S1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"janitor"</span>, <span class="st">"statistician"</span>, <span class="st">"midwife"</span>, <span class="st">"bailiff"</span>, <span class="st">"auctioneer"</span>, </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="st">"photographer"</span>, <span class="st">"geologist"</span>, <span class="st">"shoemaker"</span>, <span class="st">"athlete"</span>, <span class="st">"cashier"</span>, </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="st">"dancer"</span>, <span class="st">"housekeeper"</span>, <span class="st">"accountant"</span>, <span class="st">"physicist"</span>, <span class="st">"gardener"</span>, </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="st">"dentist"</span>, <span class="st">"weaver"</span>, <span class="st">"blacksmith"</span>, <span class="st">"psychologist"</span>, <span class="st">"supervisor"</span>, </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="st">"mathematician"</span>, <span class="st">"surveyor"</span>, <span class="st">"tailor"</span>, <span class="st">"designer"</span>, <span class="st">"economist"</span>, </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="st">"mechanic"</span>, <span class="st">"laborer"</span>, <span class="st">"postmaster"</span>, <span class="st">"broker"</span>, <span class="st">"chemist"</span>, <span class="st">"librarian"</span>, </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="st">"attendant"</span>, <span class="st">"clerical"</span>, <span class="st">"musician"</span>, <span class="st">"porter"</span>, <span class="st">"scientist"</span>, <span class="st">"carpenter"</span>, </span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="st">"sailor"</span>, <span class="st">"instructor"</span>, <span class="st">"sheriff"</span>, <span class="st">"pilot"</span>, <span class="st">"inspector"</span>, <span class="st">"mason"</span>, </span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="st">"baker"</span>, <span class="st">"administrator"</span>, <span class="st">"architect"</span>, <span class="st">"collector"</span>, <span class="st">"operator"</span>, </span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="st">"surgeon"</span>, <span class="st">"driver"</span>, <span class="st">"painter"</span>, <span class="st">"conductor"</span>, <span class="st">"nurse"</span>, <span class="st">"cook"</span>, </span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="st">"engineer"</span>, <span class="st">"retired"</span>, <span class="st">"sales"</span>, <span class="st">"lawyer"</span>, <span class="st">"clergy"</span>, <span class="st">"physician"</span>, </span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="st">"farmer"</span>, <span class="st">"clerk"</span>, <span class="st">"manager"</span>, <span class="st">"guard"</span>, <span class="st">"artist"</span>, <span class="st">"smith"</span>, <span class="st">"official"</span>, </span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="st">"police"</span>, <span class="st">"doctor"</span>, <span class="st">"professor"</span>, <span class="st">"student"</span>, <span class="st">"judge"</span>, <span class="st">"teacher"</span>, </span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="st">"author"</span>, <span class="st">"secretary"</span>, <span class="st">"soldier"</span>)</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>A1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"he"</span>, <span class="st">"son"</span>, <span class="st">"his"</span>, <span class="st">"him"</span>, <span class="st">"father"</span>, <span class="st">"man"</span>, <span class="st">"boy"</span>, <span class="st">"himself"</span>, </span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="st">"male"</span>, <span class="st">"brother"</span>, <span class="st">"sons"</span>, <span class="st">"fathers"</span>, <span class="st">"men"</span>, <span class="st">"boys"</span>, <span class="st">"males"</span>, </span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a><span class="st">"brothers"</span>, <span class="st">"uncle"</span>, <span class="st">"uncles"</span>, <span class="st">"nephew"</span>, <span class="st">"nephews"</span>)</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>B1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"she"</span>, <span class="st">"daughter"</span>, <span class="st">"hers"</span>, <span class="st">"her"</span>, <span class="st">"mother"</span>, <span class="st">"woman"</span>, <span class="st">"girl"</span>, </span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a><span class="st">"herself"</span>, <span class="st">"female"</span>, <span class="st">"sister"</span>, <span class="st">"daughters"</span>, <span class="st">"mothers"</span>, <span class="st">"women"</span>, </span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a><span class="st">"girls"</span>, <span class="st">"females"</span>, <span class="st">"sisters"</span>, <span class="st">"aunt"</span>, <span class="st">"aunts"</span>, <span class="st">"niece"</span>, <span class="st">"nieces"</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">query</span>(googlenews, <span class="at">S_words =</span> S1, <span class="at">A_words =</span> A1, <span class="at">B_words =</span> B1)</span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>res</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── sweater object ──────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Test type:  rnd 
Effect size:  -6.341598 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Functions ───────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• `calculate_es()`: Calculate effect size</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• `plot()`: Plot the bias of each individual word</code></pre>
</div>
</div>
<p>The more positive effect size indicates that words in <span class="math inline">\(\mathcal{S}\)</span> are more associated with <span class="math inline">\(\mathcal{B}\)</span>. As the effect size is negative, it indicates that the concept of occupation is more associated with <span class="math inline">\(\mathcal{B}\)</span>, i.e.&nbsp;male.</p>
<p>We can also produce a visualization to study the differences among target words. Target words such as “nurse”, “midwife”, and “housekeeper” are more associated with female than male.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(res)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/gargvis-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In this entry, I showed you how the quantification of implicit association among words works. The R package <code>sweater</code> was introduced for this task.</p>
</section>
<section id="references" class="level2 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list">
<div id="ref-benoit:2018" class="csl-entry" role="listitem">
Benoit, K., Watanabe, K., Wang, H., Nulty, P., Obeng, A., Müller, S., &amp; Matsuo, A. (2018). Quanteda: An <span>R</span> package for the quantitative analysis of textual data. <em>Journal of Open Source Software</em>, <em>3</em>(30), 774. <a href="https://doi.org/10.21105/joss.00774">https://doi.org/10.21105/joss.00774</a>
</div>
<div id="ref-caliskan:2017:S" class="csl-entry" role="listitem">
Caliskan, A., Bryson, J. J., &amp; Narayanan, A. (2017). Semantics derived automatically from language corpora contain human-like biases. <em>Science</em>, <em>356</em>(6334), 183–186. <a href="https://doi.org/10.1126/science.aal4230">https://doi.org/10.1126/science.aal4230</a>
</div>
<div id="ref-chan:2022" class="csl-entry" role="listitem">
Chan, C. (2022). Sweater: Speedy word embedding association test and extras using <span>R</span>. <em>Journal of Open Source Software</em>, <em>7</em>(72), 4036. <a href="https://doi.org/10.21105/joss.04036">https://doi.org/10.21105/joss.04036</a>
</div>
<div id="ref-garg:2018:W" class="csl-entry" role="listitem">
Garg, N., Schiebinger, L., Jurafsky, D., &amp; Zou, J. (2018). Word embeddings quantify 100 years of gender and ethnic stereotypes. <em>Proceedings of the National Academy of Sciences</em>, <em>115</em>(16), E3635–E3644. <a href="https://doi.org/10.1073/pnas.1720347115">https://doi.org/10.1073/pnas.1720347115</a>
</div>
<div id="ref-pennington:2014:G" class="csl-entry" role="listitem">
Pennington, J., Socher, R., &amp; Manning, C. (2014). Glove: Global vectors for word representation. <em>Proceedings of the 2014 Conference on Empirical Methods in Natural Language Processing (EMNLP)</em>. <a href="https://doi.org/10.3115/v1/d14-1162">https://doi.org/10.3115/v1/d14-1162</a>
</div>
<div id="ref-lsarpackage" class="csl-entry" role="listitem">
Wild, F. (2022). <em>Lsa: Latent semantic analysis</em>. <a href="https://CRAN.R-project.org/package=lsa">https://CRAN.R-project.org/package=lsa</a>
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>